{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/module/class/customer.js","webpack:///./src/module/class/dish.js","webpack:///./src/module/class/worker.js","webpack:///./src/module/class/restaurant.js","webpack:///./src/module/class.js","webpack:///./src/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","e","customer_id","Customer","this","id","uneaten","consume","eat","dish","console","log","price","nextTo","order","menu","dishes","dishesName","menuLength","length","max","Math","ceil","random","floor","push","join","Dish","cost","word_id","Worker","wages","_classCallCheck","Waiter","toString","instance","_possibleConstructorReturn","_this","__proto__","getPrototypeOf","arg","_get","Cook","_this2","dishLength","Restaurant","config","cash","seats","staff","hire","worker","fire","index","indexOf","error","splice","_worker","_class","restaurant","waiter","cook","doWork","customers","shift","count","loop","setInterval","window","clearInterval","customer"],"mappings":"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","file":"app.0d0f91fbf2ae15e15c95.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","/*\r\n* 顾客\r\n* es5\r\n*/\r\nvar customer_id = 0;\r\nvar Customer = function() {\r\n  customer_id += 1;\r\n  this.id = customer_id;\r\n  this.uneaten = []; // 已点未吃\r\n  this.consume = 0; // 消费金额，按已吃的算\r\n}\r\n// 吃\r\nCustomer.prototype.eat = function(dish) {\r\n  if (!dish) return false;\r\n  console.log('顾客：开始吃-' + dish.name);\r\n  // 菜色吃掉吃掉\r\n  this.uneaten -= 1;\r\n  // 记得算钱\r\n  this.consume += dish.price;\r\n  // 若所有菜色已吃完，下一步\r\n  if (this.uneaten <= 0 && this.nextTo) this.nextTo(this.consume)\r\n}\r\n// 点菜\r\nCustomer.prototype.order = function(menu) {\r\n  var dishes = [];\r\n  var dishesName = []; \r\n  var menuLength = menu.length;\r\n  // 最多点多少道菜\r\n  var max = Math.ceil(Math.random() * menuLength);\r\n  for (var i = 0; i < max; i += 1) {\r\n    var dish = menu[Math.floor(Math.random() * menuLength)];\r\n    dishes.push(dish);\r\n    dishesName.push(dish.name)\r\n  }\r\n  console.log('顾客：点菜-' + dishesName.join(','));\r\n  // 记录点的菜色\r\n  this.uneaten = dishes.length;\r\n  // 下一步\r\n  if (this.nextTo) this.nextTo(dishes, this);\r\n}\r\n\r\n\r\nmodule.exports = Customer;","/*\r\n* 菜单\r\n* es6\r\n*/\r\n// 菜品\r\nclass Dish {\r\n  constructor(name, cost, price) {\r\n    this.name = name;\r\n    this.cost = cost;\r\n    this.price = price\r\n  }\r\n}\r\n\r\nexport default Dish; ","\r\n/*\r\n* 工作人员\r\n* ES6\r\n*/\r\n// 基础类\r\nlet word_id = 0;\r\nclass Worker {\r\n  constructor(name, wages) {\r\n    word_id += 1;\r\n    this.id = word_id;\r\n    this.name = name;\r\n    this.wages = wages;\r\n  }\r\n  doWork() {\r\n    \r\n  }\r\n}\r\n// 服务员 - 单例模式\r\nclass Waiter extends Worker {\r\n  constructor(name, wages) {\r\n    if (Object.prototype.toString.call(Waiter.instance) === '[object Object]') return Waiter.instance;\r\n    super(name, wages);\r\n    Waiter.instance = this;\r\n  }\r\n  // 记录用户点菜/上菜\r\n  doWork(arg) {\r\n    if(Object.prototype.toString.call(arg) === '[object Array]') {\r\n      console.log('服务员: 记录点菜');\r\n    } else {\r\n      console.log('服务员: 上菜-' + arg.name);\r\n    }\r\n    super.doWork();\r\n    if (this.nextTo) this.nextTo(arg);\r\n  }\r\n}\r\n// 厨师 - 单例模式\r\nclass Cook extends Worker {\r\n  constructor(name, wages) {\r\n    if (Object.prototype.toString.call(Cook.instance) === '[object Object]') return Cook.instance;\r\n    super(name, wages);\r\n    Cook.instance = this;\r\n  }\r\n  // 烹饪菜品\r\n  doWork(arg) {\r\n    let dishes = arg;\r\n    if (Object.prototype.toString.call(dishes) !== '[object Array]') dishes = [arg];\r\n    const dishLength = dishes.length;\r\n    for (let i = 0; i < dishLength; i += 1) {\r\n      console.log('厨师: 烹饪-' + dishes[i].name);\r\n      super.doWork();\r\n      if (this.nextTo) this.nextTo(dishes[i]);\r\n    }\r\n  }\r\n}\r\n\r\nexport {\r\n  Cook,\r\n  Waiter\r\n}","/*\r\n* 餐厅 \r\n* ES5\r\n*/\r\nvar Restaurant = function(config) {\r\n  config = config || {};\r\n  // 资金\r\n  this.cash = config.cash || 0;\r\n  // 座位数量\r\n  this.seats = config.seats || 0;\r\n  // 职员列表 \r\n  this.staff = config.staff || [];\r\n  // 菜单\r\n  this.menu = config.menu || [];\r\n}\r\n// 招聘职员\r\nRestaurant.prototype.hire = function(worker) {\r\n  // 验证参数有效性\r\n  if (!worker || Object.prototype.toString.call(worker) !== '[object Object]') return false;\r\n  // 增加职员\r\n  this.staff.push(worker);\r\n}\r\n// 解雇职员\r\nRestaurant.prototype.fire = function(worker) {\r\n  // 验证参数有效性\r\n  if (!worker || Object.prototype.toString.call(worker) !== '[object Object]') return false;\r\n  const index = this.staff.indexOf(worker);\r\n  if (index < 0) return console.error('该职员不存在');\r\n  // 删除职员\r\n  this.staff.splice(index, 1);\r\n}\r\n\r\n// 单例模式\r\nvar createRestaurant = (function(config) {\r\n  var instance;\r\n  var init = function(config) {\r\n    if (!instance) instance = new Restaurant(config);\r\n    return instance;\r\n  }\r\n  return init(config);\r\n})\r\n\r\nmodule.exports = createRestaurant;","import Restaurant from './class/restaurant';\r\nimport { Cook, Waiter } from './class/worker';\r\nimport Dish from './class/dish';\r\nimport Customer from './class/customer';\r\n\r\nexport {\r\n  Restaurant,\r\n  Cook,\r\n  Waiter,\r\n  Dish,\r\n  Customer,\r\n}","import {\r\n  Restaurant,\r\n  Cook,\r\n  Waiter,\r\n  Dish,\r\n  Customer,\r\n} from './module/class';\r\n\r\n// 饭店实例\r\nconst restaurant = new Restaurant({\r\n  cash: 1000000, // 资金\r\n  seats: 1, // 座位\r\n  staff: [], // 职员\r\n});\r\n// 菜单\r\nconst menu = [\r\n  new Dish('番茄炒蛋', 10, 22),\r\n  new Dish('清炒菜心', 10, 22),\r\n  new Dish('清蒸鲈鱼', 20, 45),\r\n  new Dish('凉拌青瓜', 6, 16),\r\n  new Dish('紫菜蛋花汤', 8, 20),\r\n];\r\n// 雇佣1名服务员和1名厨师\r\nconst waiter = new Waiter(\"Chirs\", 4000);\r\nconst cook = new Cook(\"Ken\", 7000);\r\nrestaurant.hire(cook);\r\nrestaurant.hire(waiter);\r\n\r\n// 时间单位-全局\r\n// window.timeUnit = 100;\r\n\r\n/* 类之间流程 */\r\n// 服务员-参数dish为数组，告诉厨师做菜； 参数dish为对象，给顾客上菜\r\n// 暂定每次只服务一个顾客\r\nWaiter.prototype.nextTo = (dish) => {\r\n  if (Object.prototype.toString.call(dish) === '[object Array]') {\r\n    return cook.doWork(dish);\r\n  }\r\n  return customers[0].eat(dish);\r\n} \r\n\r\n// 厨师-烹饪后通知服务员上菜 \r\nCook.prototype.nextTo = (dish) => {\r\n  // 扣除菜色成本\r\n  restaurant.cash -= dish.cost;\r\n  return waiter.doWork(dish);\r\n} \r\n\r\n// 顾客-参数为数组，服务员下单点菜；参数为数值，吃完付款离开\r\nCustomer.prototype.nextTo = (arg) => {\r\n  if (Object.prototype.toString.call(arg) === '[object Array]') {\r\n    return waiter.doWork(arg);\r\n  }\r\n  // 吃完后1个时间单位后走人\r\n  const self = this;\r\n  // ...付款....\r\n  console.log('顾客：付款');\r\n  restaurant.cash += arg;\r\n  // 付款后删除\r\n  console.log('-> 顾客走了')\r\n  customers.shift();\r\n}\r\n\r\n\r\n// 顾客\r\nconst customers = [];\r\n\r\n// 顾客到来\r\nconst customerCome = () => {\r\n  const customer = new Customer();\r\n  console.log('-> 新客到')\r\n  customers.push(customer);\r\n  // 开始点菜\r\n  customer.order(menu);\r\n}\r\n// 开始营业\r\nconst start = () => {\r\n  console.log('-> 开始营业');\r\n  console.log(`-> 现有资金${restaurant.cash}`);\r\n  // 暂定招待完6个客人就关店\r\n  let count = 3;\r\n  // 每一秒判断是否来新客人,暂时不存在排队\r\n  var loop = setInterval(() => {\r\n    if (count <= 0) {\r\n      console.log('-> 停止营业');\r\n      console.log(`-> 现有资金${restaurant.cash}`);\r\n      return window.clearInterval(loop);\r\n    }\r\n    if (restaurant.seats > customers) {\r\n      customerCome();\r\n      count -= 1;\r\n    }\r\n  }, 500);\r\n}\r\n\r\nstart();"],"sourceRoot":""}