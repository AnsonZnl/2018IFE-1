!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{product:"手机",region:"华东",sale:[120,100,140,160,180,185,190,210,230,245,255,270]},{product:"手机",region:"华北",sale:[80,70,90,110,130,145,150,160,170,185,190,200]},{product:"手机",region:"华南",sale:[220,200,240,250,260,270,280,295,310,335,355,380]},{product:"笔记本",region:"华东",sale:[50,60,80,110,30,20,70,30,420,30,20,20]},{product:"笔记本",region:"华北",sale:[30,35,50,70,20,15,30,50,710,130,20,20]},{product:"笔记本",region:"华南",sale:[80,120,130,140,70,75,120,90,550,120,110,100]},{product:"智能音箱",region:"华东",sale:[10,30,4,5,6,5,4,5,6,5,5,25]},{product:"智能音箱",region:"华北",sale:[15,50,15,15,12,11,11,12,12,14,12,40]},{product:"智能音箱",region:"华南",sale:[10,40,10,6,5,6,8,6,6,6,7,26]}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={product:{title:"商品类型",name:"商品",type:"checkbox",checked:!0,options:[{value:"手机",key:"1"},{value:"笔记本",key:"2"},{value:"智能音箱",key:"3"}]},region:{title:"地区",name:"地区",type:"checkbox",checked:!0,options:[{value:"华东",key:"1"},{value:"华南",key:"2"},{value:"华北",key:"3"}]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var i=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!r)return!1;this.width=600,this.height=200,this.axisPadding=25,this.axisMaxY=this.height-1.5*this.axisPadding,this.axisMaxX=this.width-this.axisPadding,this.barPadding=10,this.xDataLength=12,this.barWidth=(this.axisMaxX-this.xDataLength*this.barPadding)/this.xDataLength,this.axisTextX=[];for(var a=0;a<this.xDataLength;a+=1)this.axisTextX.push((a+1)*(this.barWidth+this.barPadding)+this.axisPadding-this.barWidth/2);this.colorMain=["#FF8BAC","#E8C573","#91FF8B","#4F96E8","#FF84ED","#A1C2FF","#AF73E8","#E8A073","#FFE27E"],this.colorAxis="#333",this.fontSize=12,r.innerHTML='<canvas id="canvas" width="'+this.width+'" height="'+this.height+'"></canvas>     <svg id="svg" viexBox="0, 0, '+this.width+", "+this.height+'"></svg>',this.svg=document.getElementById("svg"),this.canvas=document.getElementById("canvas"),this.canvasInit(),t&&this.setData(t)}return a(e,[{key:"setData",value:function(e){if(!e||e===this.arr||!e.length)return!1;if(this.arrLength=e.length,"number"!=typeof e[0]){for(var t=[],r=e.length,a=0;a<r;a+=1)t.push.apply(t,n(e[a]));this.arrMax=Math.max.apply(Math,t)}else this.arrMax=Math.max.apply(Math,n(e));var i=this.axisMaxY,o=this.arrMax,l=(this.barPadding,this.barWidth,this.axisPadding),s=(this.barWidth,this.colorMain),u=this.axisTextX;this.coordinate=[];for(var h=0;h<this.arrLength;h+=1)if("number"!=typeof e[h]){for(var c=e[h],f=c.length,d=[],v=0;v<f;v+=1){var y=i-c[v]/o*(i-l/2),g=u[v];d.push({x:g,y:y,color:s[h]})}this.coordinate.push(d)}else{var p=i-e[h]/o*(i-l/2),x=u[h];this.coordinate.push({x:x,y:p})}this.buildSvg(e),this.clearCanvas(),this.buildCanvasLine(this.coordinate,e)}},{key:"canvasInit",value:function(){if(!this.canvas.getContext)return!1;var e=canvas.getContext("2d"),t=this.axisPadding,r=this.axisMaxY+t/2,a=this.width;e.strokeStyle=this.colorAxis,e.beginPath(),e.moveTo(t,r),e.lineTo(t,0),e.moveTo(t,r),e.lineTo(a,r),e.stroke(),e.closePath(),e.font=this.fontSize+"px",e.lineWidth=2,e.textAlign="center",e.textBaseline="top",e.fillText("0",t/2,r);for(var n=this.axisTextX,i=n.length,o=0;o<i;o+=1)e.fillText(o+1+"月",n[o],r);e.strokeStyle=this.colorMain[0],e.fillStyle=this.colorMain[0]}},{key:"clearCanvas",value:function(){if(!this.canvas.getContext)return!1;var e=canvas.getContext("2d"),t=this.axisPadding;e.clearRect(t+1,0,this.axisMaxX,this.axisMaxY+t/2-1),e.clearRect(0,0,t-5,t/2+this.fontSize)}},{key:"buildCanvasLine",value:function(e,t,r){if(!this.canvas.getContext)return!1;var a=canvas.getContext("2d"),n=this.axisPadding,i=e.length;a.save(),a.fillStyle=this.colorAxis,a.textAlign="end",a.textBaseline="middle",a.fillText(this.arrMax,n-5,n/2),a.restore(),a.save();for(var o=0;o<i;o+=1)if("[object Array]"===Object.prototype.toString.call(e[o]))for(var l=e[o],s=l.length,u=0;u<s;u+=1){var h=l[u],c=h.color;c&&(a.fillStyle=c,a.strokeStyle=c),a.beginPath(),a.arc(h.x,h.y,2,0,2*Math.PI),a.fill(),u-1>=0&&a.moveTo(l[u-1].x,l[u-1].y),a.lineTo(h.x,h.y),a.stroke(),a.closePath()}else{var f=e[o];a.beginPath(),a.arc(f.x,f.y,5,0,2*Math.PI),a.fill(),o-1>=0&&a.moveTo(e[o-1].x,e[o-1].y),a.lineTo(f.x,f.y),a.stroke(),a.fillText(t[o],f.x,f.y+5),a.closePath()}a.restore()}},{key:"buildSvg",value:function(e){var t=this.buildSvgBar(),r=this.buildSvgAxis(e);this.svg.innerHTML=t+r}},{key:"buildSvgBar",value:function(){for(var e=this.axisMaxY,t=this.barWidth,r=this.axisPadding,a=this.colorMain[0],n=this.coordinate,i=n.length,o=[],l=0;l<i;l+=1)if("[object Array]"===Object.prototype.toString.call(n[l]))for(var s=n[l],u=s.length,h=t/i*l,c=0;c<u;c+=1)o.push('<rect x="'+(s[c].x+h-t/2)+'" y="'+s[c].y+'" width="'+t/i+'" height="'+(e-s[c].y+r/2)+'" fill="'+(s[c].color||a)+'"/>');else o.push('<rect x="'+(n[l].x-t/2)+'" y="'+n[l].y+'" width="'+t+'" height="'+(e-n[l].y+r/2)+'" fill="'+(n[l].color||a)+'"/>');return o.join("")}},{key:"buildSvgAxis",value:function(){var e=[],t=this.axisPadding,r=this.axisMaxY+t/2,a=this.colorAxis,n=this.width,i=this.height,o=this.fontSize;this.barPadding,e.push('<line x1="'+t+'" y1="'+r+'" x2="'+n+'" y2="'+r+'" stroke="'+a+'" stroke-width="1"/>'),e.push('<line x1="'+t+'" y1="'+r+'" x2="'+t+'" y2="0" stroke="'+a+'" stroke-width="1"/>'),e.push('<text x="'+t+'" y="'+(i-o)+'" text-anchor="end" fill="'+a+'" style="font-size: '+o+'px">0</text>'),e.push('<text x="'+(t-5)+'" y="'+(t/2+o/2)+'" text-anchor="end" fill="'+a+'" style="font-size: '+o+'px">'+this.arrMax+"</text>");for(var l=this.axisTextX,s=l.length,u=(this.barWidth,0);u<s;u+=1)e.push('<text x="'+l[u]+'" y="'+(i-o)+'" fill='+a+'" text-anchor="middle"  style="font-size: '+o+'px">'+(u+1)+"月</text>");return e.join("")}},{key:"buildChart",value:function(){var e=this.buildSvg();return this.ctx||(e+=this.canvas),e}}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var o="<tr>{{variable}}{{fixed}}</tr>",l="<th>{{name}}</th>",s="<td>{{value}}</td>",u=function(){function e(t,r,a){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!r)return!1;this.table=document.getElementById("table"),this.table||(r.innerHTML='<table id="table" border=1></table>',this.table=document.getElementById("table")),this.attr=[],this.attrLength=0,this.config=a;var n=[];for(var i in a)this.attr.push(i);for(var s=0;s<12;s+=1)n.push(l.replace("{{name}}",s+1+"月"));o=o.replace("{{fixed}}",n.join("")),this.attrLength=this.attr.length,t&&this.setData(t)}return n(e,[{key:"setData",value:function(e,t){if(!e)return!1;this.data=e,this.attrFirstKey=t,this.table.innerHTML=this.buildTable(e)}},{key:"buildTheadTpl",value:function(){var e=[],t=this.attrFirstKey,r=this.config,a=this.buildHtml,n=this.attr;r[t]&&e.push(a(l,"{{name}}",r[t].name));for(var i=0;i<this.attrLength;i+=1)n[i]!==t&&e.push(a(l,"{{name}}",r[n[i]].name));return a(o,"{{variable}}",e.join(""))}},{key:"buildTable",value:function(e){if(!e)return"";var t=[],r=this.attrFirstKey,a=(this.config,this.buildHtml),n=this.attr,o=0;for(var l in e)for(var u=e[l],h=u.length,c=0;c<h;c+=1){var f=[];f.push.apply(f,i(a(s,"{{value}}",u[c],n,r))),f.push.apply(f,i(a(s,"{{value}}",u[c].sale))),f[0]=0===c?f[0].replace("<td>",'<td rowspan="'+h+'">'):"",t.push(a(a('<tr data-index="{{index}}">{{td}}</tr>',"{{index}}",o),"{{td}}",f.join(""))),o+=1}return a(a("<tr>{{th}}</tr>{{tr}}","{{th}}",this.buildTheadTpl(r)),"{{tr}}",t.join(""))}},{key:"buildHtml",value:function(e,t,r,n,i){if(!e||!t)return"";var o=r,l=n;if(/boolean|string|number/.test(void 0===o?"undefined":a(o)))return e.replace(t,o);var s=Object.prototype.toString.call(l),u=Object.prototype.toString.call(o);if("[object Object]"===u)switch(s){case/\[object (String|Boolean|Number)\]/:return e.replace(t,o[okey]);case"[object Array]":o=[o];break;default:return e.replace(t,o)}else if("[object Array]"!==u)return!1;"[object Array]"!==s&&/boolean|string|number/.test(void 0===l?"undefined":a(l))&&(l=[l]);for(var h=o.length,c=l?l.length:0,f=[],d=0;d<h;d+=1)if(o[d]&&l){i&&f.push(e.replace(t,o[d][i]));for(var v=0;v<c;v+=1)l[v]!==i&&f.push(e.replace(t,o[d][l[v]]))}else f.push(e.replace(t,o[d]));return f}}]),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.currentData=t}return a(e,[{key:"filterData",value:function(e){if(!e)return this.data;for(var t=[].concat(this.data),r=t.length,a=0;a<r;a++)for(var n in e){var i=e[n];if(("[object Array]"!==Object.prototype.toString.call(i)||-1===i.indexOf(t[a][n]))&&t[a][n]!==i){t.splice(a,1),r-=1,a-=1;break}}this.currentData=t}},{key:"getData",value:function(){return this.currentData}},{key:"getValueList",value:function(e){if(!e)return!1;for(var t=this.currentData,r=t.length,a=[],n=0;n<r;n+=1)a.push(t[n][e]);return a}},{key:"groupByKey",value:function(t){if(e=this.currentData,!t)return e;for(var r=e.length,a={},n=[],i=0;i<r;i+=1)if(e[i]){var o=e[i][t],l=n.indexOf(o);-1===l&&(n.push(o),a[l=n.length-1]=[]),a[l].push(e[i])}return a}}]),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(t,r){for(var a in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.config=r,this.formValue={},r){var n=r[a].type;document.getElementById(a+"-"+n).innerHTML=this.buildFormItem(r[a],a),"checkbox"===n&&r[a].checked&&(this.checkAll(a,!0),this.setAllChecked(a,!0))}}return a(e,[{key:"buildFormItem",value:function(e,t){if(!e)return!1;var r=['<span class="title">{{title}}</span>'.replace("{{title}}",e.title)],a='<label for="{{name}}_{{key}}"><input type="checkbox" value="{{value}}" name="{{name}}" id="{{name}}_{{key}}"/>{{text}}</label>'.replace(/{{name}}/g,t);"checkbox"===e.type&&r.push(a.replace(/{{(key|value)}}/gi,"all").replace(/{{text}}/g,"全选"));for(var n=e.options,i=n.length,o=0;o<i;o+=1){var l=n[o];r.push(a.replace(/{{key}}/g,l.key).replace(/{{value}}/g,l.value).replace(/{{text}}/g,l.text||l.value))}return r.join("")}},{key:"getForm",value:function(){return this.formValue}},{key:"getValueByName",value:function(e){if(!e)return!1;switch(this.config[e].type){case"checkbox":for(var t=this.form.querySelectorAll("[name="+e+"]:not([value=all])"),r=t.length,a=[],n=0;n<r;n+=1)t[n].checked&&a.push(t[n].value);return this.setAllChecked(e,a.length===r),a;default:return this.formValue[e].value}}},{key:"checkAll",value:function(e,t){for(var r=this.form.querySelectorAll("[name="+e+"]:not([value=all])"),a=r.length,n=0;n<a;n+=1)r[n].checked=t}},{key:"setAllChecked",value:function(e,t){var r=this.form.querySelector("#"+e+"_all");if(!r)return!1;r.checked=t}},{key:"setValue",value:function(e,t){return!!e&&(this.formValue[e]=t,!0)}},{key:"getCheckedInput",value:function(e){return this.form.querySelectorAll("input[name="+e+"]:checked")}}]),e}();t.default=n},function(e,t,r){"use strict";var a=u(r(6)),n=u(r(5)),i=u(r(4)),o=u(r(3)),l=u(r(2)),s=u(r(1));function u(e){return e&&e.__esModule?e:{default:e}}var h=new o.default(null,document.getElementById("chart-wrapper")),c=new i.default(null,document.getElementById("table-wrapper"),l.default),f=new a.default(document.getElementById("option-form"),l.default),d=new n.default(s.default);document.getElementById("option-form").addEventListener("change",function(e){var t=e.target,r=t.name;if(!r)return!1;if("all"===t.value){if(!t.checked)return t.checked=!0;f.checkAll(r,t.checked)}var a=f.getCheckedInput(r).length;if(!t.checked&&!a)return t.checked=!0;if(!f.setValue(r,f.getValueByName(r)))return!1;var n="region"!==r?f.getCheckedInput("region").length:a,i="product"!==r?f.getCheckedInput("product").length:a,o=1===n&&i>1?"region":"product";d.filterData(f.getForm());var l=d.groupByKey(o);c.setData(l,o),h.setData(d.getValueList("sale"))}),document.getElementById("table").addEventListener("mouseover",function(e){var t=null,r=e.target,a=r.tagName.toUpperCase();if("TD"===a&&(t=r.parentNode.dataset.index),"TR"===a&&(t=r.dataset.index),null===t)return!1;h.setData(d.getData()[t].sale)}),document.getElementById("table").addEventListener("mouseleave",function(e){h.setData(d.getValueList("sale"))}),d.filterData(),c.setData(d.groupByKey("product")),h.setData(d.getValueList("sale"))}]);
//# sourceMappingURL=app.06be1b9620a60174baa0.js.map