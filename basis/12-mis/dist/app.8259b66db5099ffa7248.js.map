{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/common.js","webpack:///./src/js/formConfig.js","webpack:///./src/js/form.js","webpack:///./src/js/table.js","webpack:///./src/js/sourceData.js","webpack:///./src/js/data.js","webpack:///./src/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","e","t","render","html","container","innerHTML","product","title","type","checked","options","key","region","getCheckedInput","setAllChecked","checkAll","getValueByName","setValue","getForm","getConfig","init","Common","form","buildFormItem","conf","replace","tpl","push","length","option","text","join","isChecked","input","querySelectorAll","document","getElementById","formConfig","flase","checkedValue","formWrapper","buildTable","buildHtml","Symbol","iterator","constructor","u","Array","isArray","from","theadTpl","thTpl","tdTpl","attr","attrLength","config","data","dataKey","firstKey","oKey","test","_typeof","oKeyType","toString","valueType","okey","keyl","htmlArr","j","th","arguments","tr","items","td","apply","_toConsumableArray","sale","GroupByKey","filterData","json","sourceData","concat","term","indexOf","splice","newArr","values","keyValue","Form","Data","Table","tableWrapper","addEventListener","target","targetValueLength","regionLength","productLength","soleKey","result"],"mappings":"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","file":"app.8259b66db5099ffa7248.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","\r\n// 渲染html到页面上\r\nconst render = (html, container) => {\r\n  if (!container) return false;\r\n  container.innerHTML = html;\r\n}\r\n\r\n\r\nexport {\r\n  render,\r\n}","\r\n// 表单配置\r\nexport default {\r\n  product: {\r\n    title: '商品类型',\r\n    name: '商品',\r\n    type: 'checkbox',\r\n    checked: true, // 是否默认全选\r\n    options: [\r\n      {\r\n        value: '手机',\r\n        key: '1',\r\n      },\r\n      {\r\n        value: '笔记本',\r\n        key: '2',\r\n      },\r\n      {\r\n        value: '智能音箱',\r\n        key: '3',\r\n      },\r\n    ]\r\n  },\r\n  region: {\r\n    title: '地区',\r\n    name: '地区',\r\n    type: 'checkbox',\r\n    checked: true, // 是否默认全选\r\n    options: [\r\n      {\r\n        value: '华东',\r\n        key: '1',\r\n      },\r\n      {\r\n        value: '华南',\r\n        key: '2',\r\n      },\r\n      {\r\n        value: '华北',\r\n        key: '3',\r\n      },\r\n    ],\r\n  },\r\n};","/*\r\n* 表单模块\r\n* 承接用户的交互，生成/记录表单\r\n*/\r\n// 表单配置\r\nimport formConfig from './formConfig.js';\r\nimport * as Common from './common.js';\r\n\r\n// html模版\r\nconst titleTpl = '<span class=\"title\">{{title}}</span>';\r\nconst checkboxTpl = '<label for=\"{{name}}_{{key}}\"><input type=\"checkbox\" value=\"{{value}}\" name=\"{{name}}\" id=\"{{name}}_{{key}}\"/>{{text}}</label>';\r\n\r\n// 当前表单值\r\nconst form = {};\r\n// 初始化\r\nconst init = (form) => {\r\n  for (const key in formConfig) {\r\n    const type = formConfig[key].type;\r\n    Common.render(buildFormItem(formConfig[key], key), document.getElementById(`${key}-${type}`));\r\n    // 设置全选\r\n    if (type !== 'checkbox' || !formConfig[key].checked) continue;\r\n    checkAll(form, key, true);\r\n    setAllChecked(key, true);\r\n  }\r\n}\r\n// 生成表单某项html \r\nconst buildFormItem = (conf, name) => {\r\n  if (!conf) return false;\r\n  const html = [\r\n    titleTpl.replace('{{title}}', conf.title),\r\n  ];\r\n  const tpl = checkboxTpl.replace(/{{name}}/g, name);\r\n  if (conf.type === 'checkbox') html.push(tpl.replace(/{{(key|value)}}/gi, 'all').replace(/{{text}}/g, '全选'));\r\n  const options = conf.options;\r\n  const l = options.length;\r\n  for (let i = 0; i < l; i += 1) {\r\n    const option = options[i];\r\n    html.push(tpl.replace(/{{key}}/g, option.key)\r\n      .replace(/{{value}}/g, option.value)\r\n      .replace(/{{text}}/g, option.text || option.value));\r\n  }\r\n  return html.join('');\r\n}\r\n// 获取表单配置\r\nconst getConfig = () => {\r\n  return formConfig;\r\n};\r\n// 获取当前表单值\r\nconst getForm = () => {\r\n  return form;\r\n};\r\n// 获取表单Dom内某name属性值\r\nconst getValueByName = (form, key) => {\r\n  if (!form || !key) return false;\r\n  // 从配置读取该name对应的控件类型\r\n  switch(formConfig[key].type) {\r\n    case 'checkbox':\r\n      // 遍历找出选中的值返回 \r\n      const input = form.querySelectorAll(`[name=${key}]:not([value=all])`);\r\n      const l = input.length;\r\n      const checkedValue = [];\r\n      for (let i = 0; i < l; i += 1) {\r\n        if (input[i].checked) checkedValue.push(input[i].value);\r\n      }\r\n      // 处理全选状态\r\n      setAllChecked(key, checkedValue.length === l);\r\n      return checkedValue;\r\n    default:\r\n      return form[key].value;\r\n  }\r\n}\r\n// 对表单进行全选/取消全选并返回\r\nconst checkAll = (form, key, isChecked) => {\r\n  if (!form) return false;\r\n  // 遍历相应的控件(排除全选按钮),设置选中状态及返回当前值\r\n  const input = form.querySelectorAll(`[name=${key}]:not([value=all])`);\r\n  const l = input.length;\r\n  for (let i = 0; i < l; i += 1) {\r\n    input[i].checked = isChecked;\r\n  }\r\n}\r\n// 设置全选选项的选中状态\r\nconst setAllChecked = (key, isChecked) => {\r\n  const input = document.getElementById(`${key}_all`);\r\n  if (!input) return false;\r\n  input.checked = isChecked;\r\n}\r\n// 修改form的属性值\r\nconst setValue = (key, value) => {\r\n  if (!key) return false;\r\n  if (form[key] === value) return flase;\r\n  form[key] = value;\r\n  return true;\r\n};\r\n// 返回选中的input\r\nconst getCheckedInput = (formWrapper, key) => {\r\n  return formWrapper.querySelectorAll(`input[name=${key}]:checked`);\r\n}\r\nexport {\r\n  init,\r\n  getConfig,\r\n  getForm,\r\n  setValue,\r\n  getValueByName,\r\n  checkAll,\r\n  setAllChecked,\r\n  getCheckedInput\r\n};","/*\r\n* 表格模块\r\n* 用表格的形式展现数据\r\n*/\r\nimport { getConfig } from './form';\r\n\r\n// 表格渲染模版\r\nconst tableTpl = '<table border=1><tr>{{th}}</tr>{{tr}}</table>';\r\nlet theadTpl = '<tr>{{variable}}{{fixed}}</tr>';\r\nconst thTpl = '<th>{{name}}</th>';\r\nconst trTpl = '<tr>{{td}}</tr>';\r\nconst tdTpl = '<td>{{value}}</td>';\r\n\r\n// 用于控制除月份外表格数据显示顺序\r\nconst attr = [];\r\nlet attrLength = 0;\r\n\r\n// 表单配置\r\nconst config = getConfig();\r\n\r\n// 初识化表格，\r\nconst init = () => {\r\n  // 遍历配置生成表格th不变部分及储存关键属性\r\n  const th = [];\r\n  for(const key in config) {\r\n    // thArr.push(thTpl.replace('{{name}}', config[key].name));\r\n    attr.push(key);\r\n  }\r\n  // 月份\r\n  for (let i = 0; i < 12; i += 1) {\r\n    th.push(thTpl.replace('{{name}}', `${i + 1}月`));\r\n  }\r\n  theadTpl = theadTpl.replace('{{fixed}}', th.join(''));\r\n  // console.log(theadTpl)\r\n  // 记录属性长度\r\n  attrLength = attr.length;\r\n}\r\n// 生成表格th关键属性部分, key为第一列属性\r\nconst buildTheadTpl = (key) =>{ \r\n  // console.log(thArr)\r\n  const th = [];\r\n  if (config[key]) th.push(buildHtml(thTpl, '{{name}}', config[key].name));\r\n  for (let i = 0; i < attrLength; i += 1) {\r\n    if (attr[i] !== key) th.push(buildHtml(thTpl, '{{name}}', config[attr[i]].name));\r\n  }\r\n\r\n  return buildHtml(theadTpl, '{{variable}}', th.join(''));\r\n}\r\n// 生成table\r\n// 若有key 按key划分数据\r\nconst buildTable = (data, key = 'product') => {\r\n  if (!data) return '';\r\n  // const l = data.length;\r\n  const tr = [];\r\n  // 遍历数据\r\n  for (const i in data) {\r\n    const items = data[i];\r\n    const l = items.length;\r\n    // 按分组遍历数据\r\n    for (let j = 0; j < l; j += 1) {\r\n      const td = [];\r\n      // 遍历非月份外属性生成html\r\n      td.push(...buildHtml(tdTpl, '{{value}}', items[j], attr, key));\r\n      // 月份数据生成html\r\n      td.push(...buildHtml(tdTpl, '{{value}}', items[j].sale))\r\n      // 处理table合并td\r\n      if (j === 0) {\r\n        td[0] = td[0].replace('<td>', `<td rowspan=\"${l}\">`);\r\n      } else {\r\n        td[0] = '';\r\n      }\r\n      tr.push(buildHtml(trTpl, '{{td}}', td.join('')));\r\n    }\r\n  }\r\n  const tpl = buildHtml(tableTpl, '{{th}}', buildTheadTpl(key));\r\n  return buildHtml(tpl, '{{tr}}', tr.join(''));\r\n}\r\n// 替换模版关键字并返回\r\n// value为数组或对象或字符串，若value为数组，遍历返回组装返回数组，\r\n// oKey控制是否用value的某(些）属性替换\r\n// firstKey 第一列\r\nconst buildHtml = (tpl, key, data, dataKey, firstKey) => {\r\n  if (!tpl || !key) return '';\r\n  let value = data;\r\n  let oKey = dataKey;\r\n  if (/boolean|string|number/.test(typeof value)) return tpl.replace(key, value);\r\n  // 获取data和 dataKey的类型\r\n  const oKeyType = Object.prototype.toString.call(oKey);\r\n  const valueType = Object.prototype.toString.call(value);\r\n  if (valueType === '[object Object]') {\r\n    // 若oKey为数组，将value处理成数组，进入遍历\r\n    switch (oKeyType) {\r\n      case /\\[object (String|Boolean|Number)\\]/:\r\n        return tpl.replace(key, value[okey]);\r\n      case '[object Array]':\r\n        value = [value];\r\n        break;\r\n      default:\r\n        return tpl.replace(key, value);\r\n    }\r\n  } else if (valueType !== '[object Array]') {\r\n    return false;\r\n  }\r\n  // 处理okey成数组,方便统一遍历\r\n  if (oKeyType !== '[object Array]' && /boolean|string|number/.test(typeof oKey)) oKey = [oKey];\r\n  const l = value.length;\r\n  const keyl = oKey ? oKey.length : 0;\r\n  const htmlArr = [];\r\n  for (let i = 0; i < l; i += 1) {\r\n    if (!value[i] || !oKey) {\r\n      htmlArr.push(tpl.replace(key, value[i]));\r\n      continue;\r\n    }\r\n    if (firstKey) htmlArr.push(tpl.replace(key, value[i][firstKey]));\r\n    for (let j = 0; j < keyl; j += 1) {\r\n      if (oKey[j] !== firstKey) htmlArr.push(tpl.replace(key, value[i][oKey[j]]));\r\n    } \r\n  }\r\n  return htmlArr;\r\n}\r\n\r\nexport {\r\n  init,\r\n  buildHtml,\r\n  buildTable,\r\n};","// 假数据\r\nlet sourceData = [{\r\n  product: \"手机\",\r\n  region: \"华东\",\r\n  sale: [120, 100, 140, 160, 180, 185, 190, 210, 230, 245, 255, 270]\r\n}, {\r\n  product: \"手机\",\r\n  region: \"华北\",\r\n  sale: [80, 70, 90, 110, 130, 145, 150, 160, 170, 185, 190, 200]\r\n}, {\r\n  product: \"手机\",\r\n  region: \"华南\",\r\n  sale: [220, 200, 240, 250, 260, 270, 280, 295, 310, 335, 355, 380]\r\n}, {\r\n  product: \"笔记本\",\r\n  region: \"华东\",\r\n  sale: [50, 60, 80, 110, 30, 20, 70, 30, 420, 30, 20, 20]\r\n}, {\r\n  product: \"笔记本\",\r\n  region: \"华北\",\r\n  sale: [30, 35, 50, 70, 20, 15, 30, 50, 710, 130, 20, 20]\r\n}, {\r\n  product: \"笔记本\",\r\n  region: \"华南\",\r\n  sale: [80, 120, 130, 140, 70, 75, 120, 90, 550, 120, 110, 100]\r\n}, {\r\n  product: \"智能音箱\",\r\n  region: \"华东\",\r\n  sale: [10, 30, 4, 5, 6, 5, 4, 5, 6, 5, 5, 25]\r\n}, {\r\n  product: \"智能音箱\",\r\n  region: \"华北\",\r\n  sale: [15, 50, 15, 15, 12, 11, 11, 12, 12, 14, 12, 40]\r\n}, {\r\n  product: \"智能音箱\",\r\n  region: \"华南\",\r\n  sale: [10, 40, 10, 6, 5, 6, 8, 6, 6, 6, 7, 26]\r\n}]\r\n\r\nexport default sourceData;","/*\r\n* 数据处理模块\r\n* 根据用户的输入，对数据进行组合，提供给页面展现\r\n*/\r\n\r\nimport sourceData from './sourceData.js'; // 假数据\r\n\r\n// 根据配置筛选数据 返回筛选的数据\r\nconst filterData = (json) => {\r\n  if (!json) return sourceData;\r\n  // 拷贝一份数据，遍历数据\r\n  const data = [].concat(sourceData);\r\n  let length = data.length;\r\n  for (let i = 0; i < length; i++) {\r\n    // 判断是否符合表单条件\r\n    for (const key in json) {\r\n      const term = json[key];\r\n      // if (term === null) continue;\r\n      if ((Object.prototype.toString.call(term) === '[object Array]' && term.indexOf(data[i][key]) !== -1) || data[i][key] === term) continue;\r\n      // 删除不符合的数据\r\n      data.splice(i, 1);\r\n      length -= 1;\r\n      i -= 1;\r\n      break;\r\n    }\r\n  }\r\n  return data;\r\n}\r\n// 数据分组\r\nconst GroupByKey = (data, key) => {\r\n  if (!data || !key) return data;\r\n  const length = data.length;\r\n  const newArr = {};\r\n  const values = []; // 用于分组，避免出现中文\r\n  for (let i = 0; i < length; i += 1) {\r\n    if (!data[i]) continue;\r\n    // 以key的数据值为基准划分数组\r\n    const keyValue = data[i][key];\r\n    let j = values.indexOf(keyValue); // 找到分组依据对应的唯一标志\r\n    // 每个新组需要赋值\r\n    if (j === -1) {\r\n      values.push(keyValue);\r\n      j = values.length - 1;\r\n      newArr[j] = [];\r\n    }\r\n    // 将数据添加到对应组\r\n    newArr[j].push(data[i]); \r\n  }\r\n  return newArr\r\n}\r\nexport {\r\n  filterData,\r\n  GroupByKey,\r\n}","import * as Form from './js/form.js';\r\nimport * as Data from './js/data.js';\r\nimport * as Table from './js/table.js';\r\nimport * as Common from './js/common.js';\r\n// 表单配置\r\nimport formConfig from './js/formConfig.js';\r\n\r\nconst formWrapper = document.getElementById('option-form');\r\nconst tableWrapper = document.getElementById('table-wrapper');\r\n\r\n// 监听表单变更\r\nformWrapper.addEventListener('change', (e) => {\r\n  // 记录储存新的变更\r\n  const target = e.target;\r\n  const key = target.name;\r\n  if (!key) return false;\r\n  // 全选按钮\r\n  if(target.value === 'all') {\r\n    // 不给取消全选\r\n    if (!target.checked) return target.checked = true;\r\n    Form.checkAll(formWrapper, key, target.checked);\r\n  }\r\n  // 不给一个不选\r\n  const targetValueLength = Form.getCheckedInput(formWrapper, key).length;\r\n  if (!target.checked && !targetValueLength) return target.checked = true;\r\n  // 记录表单新值，返回是否变更\r\n  const isChange = Form.setValue(key, Form.getValueByName(formWrapper, key));\r\n  if (!isChange) return false;\r\n  // 根据新数据渲染表格\r\n  // 若地区只选了一个合并地区并且产品选择不止一个，其他情况合并商品选项\r\n  const regionLength = key !== 'region' ? Form.getCheckedInput(formWrapper, 'region').length : targetValueLength;\r\n  const productLength = key !== 'product' ? Form.getCheckedInput(formWrapper, 'product').length : targetValueLength;\r\n  // 合并的key\r\n  const soleKey = regionLength === 1 && productLength > 1 ? 'region' : 'product';\r\n  // 根据新的表单值筛选符合的数据\r\n  const result = Data.GroupByKey(Data.filterData(Form.getForm()), soleKey);\r\n  return Common.render(Table.buildTable(result, soleKey), tableWrapper);\r\n})\r\n\r\n// 初始化页面, 默认显示全部数据\r\nconst init = () => {\r\n  Form.init(formWrapper);\r\n  Table.init();\r\n  Common.render(Table.buildTable(Data.GroupByKey(Data.filterData(), 'product')), tableWrapper);\r\n}\r\ninit();"],"sourceRoot":""}